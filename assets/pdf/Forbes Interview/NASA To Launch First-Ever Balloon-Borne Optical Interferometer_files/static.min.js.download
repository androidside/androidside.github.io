!function(n){function e(c){if(t[c])return t[c].exports;var g=t[c]={i:c,l:!1,exports:{}};return n[c].call(g.exports,g,g.exports,e),g.l=!0,g.exports}var t={};e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,c){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:c})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=0)}([/*!****************!*\
  !*** ./tag.js ***!
  \****************/
function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar DEFAULT_DOMAIN = 'mydmp.exelator.com';\nvar DEFAULT_DATA_OBJECT = 'dataLayer';\n\nvar writeLog = function writeLog(level, message) {\n  if (debugEnabled()) if (level === 'error') console.error(level + ': ' + message);else {\n    console.log(level + ': ' + message);\n  }\n};\n\nvar debugEnabled = function debugEnabled() {\n  if (checkParam('dbg') && window.xl8_config['dbg'] == 'smtdn9') {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nvar getProto = function getProto() {\n  if (window.location.protocol === 'https:') {\n    writeLog('info', 'protocol is https');\n    return 'https:';\n  } else {\n    writeLog('info', 'protocol is http');\n    return 'http:';\n  }\n};\n\nvar checkParam = function checkParam(param) {\n  try {\n    if (window.xl8_config[param] != undefined) {\n      return true;\n    }\n  } catch (err) {\n    return false;\n  }\n};\n\nvar getDomain = function getDomain() {\n  if (checkParam('domain')) {\n    writeLog('info', 'domain is ' + window.xl8_config['domain']);\n    return window.xl8_config['domain'];\n  } else {\n    return DEFAULT_DOMAIN;\n  }\n};\n\nvar tokenizeDataObject = function tokenizeDataObject(obj, params, parent) {\n\n  for (var property in obj) {\n\n    // calculate property path\n    if (parent === undefined) {\n      var path = property.replace(/ /g, \"_\");\n    } else {\n      var path = parent + '-' + property.replace(/ /g, \"_\");\n    }\n\n    if (obj.hasOwnProperty(property)) {\n      if (_typeof(obj[property]) == 'object') {\n        if (Array.isArray(obj[property])) {\n          writeLog('info', 'found attribute ' + path + ' with value ' + obj[property].join());\n          params[path] = obj[property].join();\n        } else {\n          tokenizeDataObject(obj[property], params, path);\n        }\n      } else {\n        writeLog('info', 'found attribute ' + path + ' with value ' + obj[property]);\n        params[path] = obj[property];\n      }\n    }\n  }\n};\n\nvar getDataObject = function getDataObject() {\n  var objectName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'dataLayer';\n\n  try {\n    if (window[objectName] === undefined) throw new Error();\n    if (_typeof(window[objectName]) !== 'object') {\n      var dict = {};\n      dict[objectName] = window[objectName];\n      return dict;\n    }\n    return window[objectName];\n  } catch (err) {\n    writeLog('error', objectName + ' is undefined');\n  }\n};\n\nvar buildTagURL = function buildTagURL(p, g, params, proto, base) {\n\n  var tag_url = proto + '//' + base + '/load/?p=' + p + '&g=' + g + '&j=d';\n  tag_url += '&url=' + encodeURIComponent(window.location.href);\n  tag_url += '&rurl=' + encodeURIComponent(document.referrer);\n  for (var param in params) {\n    tag_url += '&' + param + '=' + encodeURIComponent(params[param]);\n  }\n  return tag_url;\n};\n\nvar fireTag = function fireTag(tag_url) {\n  var httpRequest = new XMLHttpRequest();\n  if (!httpRequest) {\n    writeLog('error', 'cannot create request, giving up');\n  }\n  httpRequest.withCredentials = true;\n  httpRequest.onreadystatechange = function () {\n    return handleResponse(httpRequest);\n  };\n  httpRequest.open('GET', tag_url);\n  httpRequest.send();\n  writeLog('info', 'firing tag: ' + tag_url);\n};\n\nvar handleResponse = function handleResponse(httpRequest) {\n  if (httpRequest.readyState == XMLHttpRequest.DONE) {\n    if (httpRequest.status !== 200) {\n      writeLog('error', 'There was a problem with the request.');\n    }\n    if (httpRequest.status === 200) {\n      writeLog('info', 'Tag fired successfully!');\n    }\n  }\n};\n\nvar getDataObjectList = function getDataObjectList() {\n  var dataObjects = [DEFAULT_DATA_OBJECT];\n  if (checkParam('dataObjects')) {\n    dataObjects = [].concat(_toConsumableArray(dataObjects), _toConsumableArray(window.xl8_config['dataObjects']));\n  }\n  return dataObjects;\n};\n\nvar getCssObjectList = function getCssObjectList() {\n\n  var cssObjects = {\n    classes: [],\n    ids: [],\n    elements: [],\n    complex: []\n  };\n  if (checkParam('cssObjects') && Array.isArray(window.xl8_config['cssObjects'])) {\n    window.xl8_config['cssObjects'].forEach(function (selector) {\n\n      if (typeof selector === 'string') {\n        if (selector.startsWith('.')) cssObjects.classes.push(selector.substring(1));else if (selector.startsWith('#')) cssObjects.ids.push(selector.substring(1));else cssObjects.elements.push(selector);\n      } else if ((typeof selector === 'undefined' ? 'undefined' : _typeof(selector)) === 'object' && selector.hasOwnProperty('selector')) {\n        if (selector.selector.startsWith('.')) cssObjects.complex.push(_extends({}, selector, { selector: selector.selector.substring(1), type: 'class' }));else if (selector.selector.startsWith('#')) cssObjects.complex.push(_extends({}, selector, { selector: selector.selector.substring(1), type: 'id' }));else cssObjects.complex.push(_extends({}, selector, { type: 'element' }));\n      }\n    });\n  }\n  return cssObjects;\n};\n\nvar buildAndFire = function buildAndFire(dataObjects, cssObjects) {\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n\n  var myParams = {};\n\n  dataObjects.forEach(function (object) {\n    tokenizeDataObject(getDataObject(object), myParams);\n  });\n\n  cssObjects.classes.forEach(function (cssClass) {\n    var selectorString = '';\n    [].concat(_toConsumableArray(document.getElementsByClassName(cssClass))).forEach(function (selector) {\n      selectorString += selector.innerText;\n    });\n    myParams[cssClass] = selectorString;\n    writeLog('info', 'found class ' + cssClass + ' with value ' + selectorString);\n  });\n\n  cssObjects.ids.forEach(function (cssId) {\n    var element = document.getElementById(cssId);\n    if (element !== null) {\n      myParams[cssId] = element.innerText;\n      writeLog('info', 'found id ' + cssId + ' with value ' + element.innerText);\n    }\n  });\n\n  cssObjects.elements.forEach(function (element) {\n    var selectorString = '';\n    [].concat(_toConsumableArray(document.getElementsByTagName(element))).forEach(function (selector) {\n      selectorString += selector.innerText;\n    });\n    myParams[element] = selectorString;\n    writeLog('info', 'found tag ' + element + ' with value ' + selectorString);\n  });\n\n  cssObjects.complex.forEach(function (complex) {\n\n    var elements = [];\n    if (complex.type === 'class') elements = [].concat(_toConsumableArray(document.getElementsByClassName(complex.selector)));else if (complex.type === 'id') elements = [document.getElementById(complex.selector)];else if (complex.type === 'element') elements = [].concat(_toConsumableArray(document.getElementsByTagName(complex.selector)));\n\n    elements.forEach(function (element) {\n\n      if (!complex.hasOwnProperty('key')) return;\n      complex.key.split('|').forEach(function (key) {\n        var myK = element.getAttribute(key);\n        if (myK === null) return;\n        myK = myK.replace(/[^a-zA-Z0-9]/g, '_');\n        if (complex.hasOwnProperty('value')) {\n          myParams[myK] = element.getAttribute(complex.value);\n        } else {\n          myParams[myK] = element.innerText;\n        }\n\n        writeLog('info', 'found tag ' + myK + ' with value ' + myParams[myK]);\n      });\n    });\n  });\n\n  fireTag(buildTagURL(window.xl8_config['p'], window.xl8_config['g'], _extends({}, myParams, data), getProto(), getDomain()));\n};\n\nvar runNielsenFlow = function runNielsenFlow() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n\n  writeLog('info', 'starting data delivery flow');\n\n  if (checkParam('p') && checkParam('g')) {\n\n    var dataObjects = getDataObjectList();\n    var cssObjects = getCssObjectList();\n    var clientData = data;\n\n    // always fire the tag at least once\n    buildAndFire(dataObjects, cssObjects, clientData);\n\n    // if an interval was set, re-fire the tag on that interval\n    if (checkParam('interval')) {\n      setInterval(function () {\n        return buildAndFire(dataObjects, cssObjects, clientData);\n      }, window.xl8_config['interval']);\n    }\n  }\n};\n\nwindow.sendToNielsen = function () {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  return runNielsenFlow(data);\n};\n\nif (window.addEventListener) // W3C standard\n  {\n    window.addEventListener('load', runNielsenFlow, false);\n    writeLog('info', 'added onload listener');\n  } else if (window.attachEvent) // Microsoft\n  {\n    window.attachEvent('onload', runNielsenFlow);\n    writeLog('info', 'added onload listener');\n  }//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy90YWcuanM/ODE4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBERUZBVUxUX0RPTUFJTiA9ICdteWRtcC5leGVsYXRvci5jb20nXG5jb25zdCBERUZBVUxUX0RBVEFfT0JKRUNUID0gJ2RhdGFMYXllcidcblxuY29uc3Qgd3JpdGVMb2cgPSAobGV2ZWwsIG1lc3NhZ2UpID0+IHtcbiAgaWYgKGRlYnVnRW5hYmxlZCgpKVxuICAgIGlmIChsZXZlbCA9PT0gJ2Vycm9yJylcbiAgICAgIGNvbnNvbGUuZXJyb3IobGV2ZWwgKyAnOiAnICsgbWVzc2FnZSlcbiAgICBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKGxldmVsICsgJzogJyArIG1lc3NhZ2UpXG4gICAgfVxufVxuXG5jb25zdCBkZWJ1Z0VuYWJsZWQgPSAoKSA9PiB7XG4gIGlmIChjaGVja1BhcmFtKCdkYmcnKSAmJiB3aW5kb3cueGw4X2NvbmZpZ1snZGJnJ10gPT0gJ3NtdGRuOScpe1xuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuY29uc3QgZ2V0UHJvdG8gPSAoKSA9PiB7XG4gIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonKSB7XG4gICAgd3JpdGVMb2coJ2luZm8nLCAncHJvdG9jb2wgaXMgaHR0cHMnKVxuICAgIHJldHVybiAnaHR0cHM6J1xuICB9XG4gIGVsc2Uge1xuICAgIHdyaXRlTG9nKCdpbmZvJywgJ3Byb3RvY29sIGlzIGh0dHAnKVxuICAgIHJldHVybiAnaHR0cDonXG4gIH1cbn1cblxuY29uc3QgY2hlY2tQYXJhbSA9IChwYXJhbSkgPT4ge1xuICB0cnl7XG4gICAgaWYgKHdpbmRvdy54bDhfY29uZmlnW3BhcmFtXSAhPSB1bmRlZmluZWQpe1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cbiAgY2F0Y2goZXJyKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuY29uc3QgZ2V0RG9tYWluID0gKCkgPT4ge1xuICBpZiAoY2hlY2tQYXJhbSgnZG9tYWluJykpIHtcbiAgICB3cml0ZUxvZygnaW5mbycsICdkb21haW4gaXMgJyArIHdpbmRvdy54bDhfY29uZmlnWydkb21haW4nXSlcbiAgICByZXR1cm4gd2luZG93LnhsOF9jb25maWdbJ2RvbWFpbiddXG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIERFRkFVTFRfRE9NQUlOXG4gIH1cbn1cblxuY29uc3QgdG9rZW5pemVEYXRhT2JqZWN0ID0gKG9iaiwgcGFyYW1zLCBwYXJlbnQpID0+IHtcblxuICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmopIHtcblxuICAgIC8vIGNhbGN1bGF0ZSBwcm9wZXJ0eSBwYXRoXG4gICAgaWYgKHBhcmVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgcGF0aCA9IHByb3BlcnR5LnJlcGxhY2UoLyAvZyxcIl9cIilcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YXIgcGF0aCA9IHBhcmVudCArICctJyArIHByb3BlcnR5LnJlcGxhY2UoLyAvZyxcIl9cIilcbiAgICB9XG5cbiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xuICAgICAgaWYgKHR5cGVvZiBvYmpbcHJvcGVydHldID09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtwcm9wZXJ0eV0pKSB7XG4gICAgICAgICAgd3JpdGVMb2coJ2luZm8nLCAnZm91bmQgYXR0cmlidXRlICcrcGF0aCsnIHdpdGggdmFsdWUgJytvYmpbcHJvcGVydHldLmpvaW4oKSlcbiAgICAgICAgICBwYXJhbXNbcGF0aF0gPSBvYmpbcHJvcGVydHldLmpvaW4oKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2VuaXplRGF0YU9iamVjdChvYmpbcHJvcGVydHldLCBwYXJhbXMsIHBhdGgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB3cml0ZUxvZygnaW5mbycsICdmb3VuZCBhdHRyaWJ1dGUgJytwYXRoKycgd2l0aCB2YWx1ZSAnK29ialtwcm9wZXJ0eV0pXG4gICAgICAgIHBhcmFtc1twYXRoXSA9IG9ialtwcm9wZXJ0eV1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuY29uc3QgZ2V0RGF0YU9iamVjdCA9IChvYmplY3ROYW1lPSdkYXRhTGF5ZXInKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKHdpbmRvd1tvYmplY3ROYW1lXSA9PT0gdW5kZWZpbmVkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAgICBpZiAodHlwZW9mIHdpbmRvd1tvYmplY3ROYW1lXSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIGxldCBkaWN0ID0ge31cbiAgICAgIGRpY3Rbb2JqZWN0TmFtZV0gPSB3aW5kb3dbb2JqZWN0TmFtZV1cbiAgICAgIHJldHVybiBkaWN0XG4gICAgfVxuICAgIHJldHVybiB3aW5kb3dbb2JqZWN0TmFtZV1cbiAgfVxuICBjYXRjaChlcnIpIHtcbiAgICB3cml0ZUxvZygnZXJyb3InLCBgJHtvYmplY3ROYW1lfSBpcyB1bmRlZmluZWRgKVxuICB9XG59XG5cbmNvbnN0IGJ1aWxkVGFnVVJMID0gKHAsIGcsIHBhcmFtcywgcHJvdG8sIGJhc2UpID0+IHtcblxuICBsZXQgdGFnX3VybCA9IHByb3RvICsgJy8vJyArIGJhc2UgKyAnL2xvYWQvP3A9JyArIHAgKyAnJmc9JyArIGcgKyAnJmo9ZCdcbiAgdGFnX3VybCArPSAnJnVybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICB0YWdfdXJsICs9ICcmcnVybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LnJlZmVycmVyKVxuICBmb3IgKHZhciBwYXJhbSBpbiBwYXJhbXMpIHtcbiAgICB0YWdfdXJsICs9ICgnJicgKyBwYXJhbSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNbcGFyYW1dKSlcbiAgfVxuICByZXR1cm4gdGFnX3VybFxufVxuXG5jb25zdCBmaXJlVGFnID0gKHRhZ191cmwpID0+IHtcbiAgbGV0IGh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcbiAgaWYgKCFodHRwUmVxdWVzdCkge1xuICAgIHdyaXRlTG9nKCdlcnJvcicsICdjYW5ub3QgY3JlYXRlIHJlcXVlc3QsIGdpdmluZyB1cCcpXG4gIH1cbiAgaHR0cFJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuICBodHRwUmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiBoYW5kbGVSZXNwb25zZShodHRwUmVxdWVzdClcbiAgaHR0cFJlcXVlc3Qub3BlbignR0VUJywgdGFnX3VybClcbiAgaHR0cFJlcXVlc3Quc2VuZCgpXG4gIHdyaXRlTG9nKCdpbmZvJywgYGZpcmluZyB0YWc6ICR7dGFnX3VybH1gKVxufVxuXG5jb25zdCBoYW5kbGVSZXNwb25zZSA9IChodHRwUmVxdWVzdCkgPT4ge1xuICBpZiAoaHR0cFJlcXVlc3QucmVhZHlTdGF0ZSA9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7XG4gICAgICBpZiAoaHR0cFJlcXVlc3Quc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgd3JpdGVMb2coJ2Vycm9yJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gd2l0aCB0aGUgcmVxdWVzdC4nKVxuICAgICAgfVxuICAgICAgaWYgKGh0dHBSZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgIHdyaXRlTG9nKCdpbmZvJywgJ1RhZyBmaXJlZCBzdWNjZXNzZnVsbHkhJylcbiAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IGdldERhdGFPYmplY3RMaXN0ID0gKCkgPT4ge1xuICBsZXQgZGF0YU9iamVjdHMgPSBbREVGQVVMVF9EQVRBX09CSkVDVCwgXVxuICBpZiAoY2hlY2tQYXJhbSgnZGF0YU9iamVjdHMnKSkge1xuICAgIGRhdGFPYmplY3RzID0gW1xuICAgICAgLi4uZGF0YU9iamVjdHMsXG4gICAgICAuLi53aW5kb3cueGw4X2NvbmZpZ1snZGF0YU9iamVjdHMnXVxuICAgIF1cbiAgfVxuICByZXR1cm4gZGF0YU9iamVjdHNcbn1cblxuY29uc3QgZ2V0Q3NzT2JqZWN0TGlzdCA9ICgpID0+IHtcblxuICBsZXQgY3NzT2JqZWN0cyA9IHtcbiAgICBjbGFzc2VzOiBbXSxcbiAgICBpZHM6IFtdLFxuICAgIGVsZW1lbnRzOiBbXSxcbiAgICBjb21wbGV4OiBbXVxuICB9XG4gIGlmIChjaGVja1BhcmFtKCdjc3NPYmplY3RzJykgJiYgQXJyYXkuaXNBcnJheSh3aW5kb3cueGw4X2NvbmZpZ1snY3NzT2JqZWN0cyddKSkge1xuICAgIHdpbmRvdy54bDhfY29uZmlnWydjc3NPYmplY3RzJ10uZm9yRWFjaChzZWxlY3RvciA9PiB7XG5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmIChzZWxlY3Rvci5zdGFydHNXaXRoKCcuJykpIGNzc09iamVjdHMuY2xhc3Nlcy5wdXNoKHNlbGVjdG9yLnN1YnN0cmluZygxKSlcbiAgICAgICAgZWxzZSBpZiAoc2VsZWN0b3Iuc3RhcnRzV2l0aCgnIycpKSBjc3NPYmplY3RzLmlkcy5wdXNoKHNlbGVjdG9yLnN1YnN0cmluZygxKSlcbiAgICAgICAgZWxzZSBjc3NPYmplY3RzLmVsZW1lbnRzLnB1c2goc2VsZWN0b3IpXG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09ICdvYmplY3QnICYmIHNlbGVjdG9yLmhhc093blByb3BlcnR5KCdzZWxlY3RvcicpKSB7XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3Rvci5zdGFydHNXaXRoKCcuJykpIGNzc09iamVjdHMuY29tcGxleC5wdXNoKHsgLi4uc2VsZWN0b3IsIHNlbGVjdG9yOiBzZWxlY3Rvci5zZWxlY3Rvci5zdWJzdHJpbmcoMSksIHR5cGU6ICdjbGFzcycgfSlcbiAgICAgICAgZWxzZSBpZiAoc2VsZWN0b3Iuc2VsZWN0b3Iuc3RhcnRzV2l0aCgnIycpKSBjc3NPYmplY3RzLmNvbXBsZXgucHVzaCh7IC4uLnNlbGVjdG9yLCBzZWxlY3Rvcjogc2VsZWN0b3Iuc2VsZWN0b3Iuc3Vic3RyaW5nKDEpLCB0eXBlOiAnaWQnIH0pXG4gICAgICAgIGVsc2UgY3NzT2JqZWN0cy5jb21wbGV4LnB1c2goeyAuLi5zZWxlY3RvciwgdHlwZTogJ2VsZW1lbnQnIH0pXG4gICAgICB9XG4gICAgfSlcblxuICB9XG4gIHJldHVybiBjc3NPYmplY3RzXG59XG5cbmNvbnN0IGJ1aWxkQW5kRmlyZSA9IChkYXRhT2JqZWN0cywgY3NzT2JqZWN0cywgZGF0YT1udWxsKSA9PiB7XG5cbiAgbGV0IG15UGFyYW1zID0ge31cblxuICBkYXRhT2JqZWN0cy5mb3JFYWNoKG9iamVjdCA9PiB7XG4gICAgdG9rZW5pemVEYXRhT2JqZWN0KGdldERhdGFPYmplY3Qob2JqZWN0KSwgbXlQYXJhbXMpXG4gIH0pXG5cbiAgY3NzT2JqZWN0cy5jbGFzc2VzLmZvckVhY2goY3NzQ2xhc3MgPT4ge1xuICAgIGxldCBzZWxlY3RvclN0cmluZyA9ICcnO1xuICAgIFsgLi4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjc3NDbGFzcykgXS5mb3JFYWNoKHNlbGVjdG9yID0+IHtcbiAgICAgIHNlbGVjdG9yU3RyaW5nICs9IHNlbGVjdG9yLmlubmVyVGV4dFxuICAgIH0pXG4gICAgbXlQYXJhbXNbY3NzQ2xhc3NdID0gc2VsZWN0b3JTdHJpbmdcbiAgICB3cml0ZUxvZygnaW5mbycsICdmb3VuZCBjbGFzcyAnK2Nzc0NsYXNzKycgd2l0aCB2YWx1ZSAnK3NlbGVjdG9yU3RyaW5nKVxuICB9KVxuXG4gIGNzc09iamVjdHMuaWRzLmZvckVhY2goY3NzSWQgPT4ge1xuICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY3NzSWQpXG4gICAgaWYgKGVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgIG15UGFyYW1zW2Nzc0lkXSA9IGVsZW1lbnQuaW5uZXJUZXh0XG4gICAgICB3cml0ZUxvZygnaW5mbycsICdmb3VuZCBpZCAnK2Nzc0lkKycgd2l0aCB2YWx1ZSAnK2VsZW1lbnQuaW5uZXJUZXh0KVxuICAgIH1cbiAgfSlcblxuICBjc3NPYmplY3RzLmVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgbGV0IHNlbGVjdG9yU3RyaW5nID0gJyc7XG4gICAgWyAuLi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShlbGVtZW50KSBdLmZvckVhY2goc2VsZWN0b3IgPT4ge1xuICAgICAgc2VsZWN0b3JTdHJpbmcgKz0gc2VsZWN0b3IuaW5uZXJUZXh0XG4gICAgfSlcbiAgICBteVBhcmFtc1tlbGVtZW50XSA9IHNlbGVjdG9yU3RyaW5nXG4gICAgd3JpdGVMb2coJ2luZm8nLCAnZm91bmQgdGFnICcrZWxlbWVudCsnIHdpdGggdmFsdWUgJytzZWxlY3RvclN0cmluZylcbiAgfSlcblxuICBjc3NPYmplY3RzLmNvbXBsZXguZm9yRWFjaChjb21wbGV4ID0+IHtcblxuICAgIGxldCBlbGVtZW50cyA9IFtdXG4gICAgaWYgKGNvbXBsZXgudHlwZSA9PT0gJ2NsYXNzJykgZWxlbWVudHMgPSBbIC4uLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY29tcGxleC5zZWxlY3RvcikgXVxuICAgIGVsc2UgaWYgKGNvbXBsZXgudHlwZSA9PT0gJ2lkJykgZWxlbWVudHMgPSBbIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbXBsZXguc2VsZWN0b3IpIF1cbiAgICBlbHNlIGlmIChjb21wbGV4LnR5cGUgPT09ICdlbGVtZW50JykgZWxlbWVudHMgPSBbIC4uLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGNvbXBsZXguc2VsZWN0b3IpIF1cblxuICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG5cbiAgICAgIGlmICghY29tcGxleC5oYXNPd25Qcm9wZXJ0eSgna2V5JykpIHJldHVyblxuICAgICAgY29tcGxleC5rZXkuc3BsaXQoJ3wnKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGxldCBteUsgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShrZXkpXG4gICAgICAgIGlmIChteUsgPT09IG51bGwpIHJldHVyblxuICAgICAgICBteUsgPSBteUsucmVwbGFjZSgvW15hLXpBLVowLTldL2csJ18nKVxuICAgICAgICBpZiAoY29tcGxleC5oYXNPd25Qcm9wZXJ0eSgndmFsdWUnKSkge1xuICAgICAgICAgIG15UGFyYW1zW215S10gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShjb21wbGV4LnZhbHVlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG15UGFyYW1zW215S10gPSBlbGVtZW50LmlubmVyVGV4dFxuICAgICAgICB9XG5cbiAgICAgICAgd3JpdGVMb2coJ2luZm8nLCAnZm91bmQgdGFnICcrbXlLKycgd2l0aCB2YWx1ZSAnK215UGFyYW1zW215S10pXG4gICAgICB9KVxuICAgIH0pXG5cbiAgfSlcblxuICBmaXJlVGFnKFxuICAgIGJ1aWxkVGFnVVJMKFxuICAgICAgd2luZG93LnhsOF9jb25maWdbJ3AnXSxcbiAgICAgIHdpbmRvdy54bDhfY29uZmlnWydnJ10sXG4gICAgICB7Li4ubXlQYXJhbXMsIC4uLmRhdGF9LFxuICAgICAgZ2V0UHJvdG8oKSxcbiAgICAgIGdldERvbWFpbigpXG4gICAgKVxuICApXG59XG5cbmNvbnN0IHJ1bk5pZWxzZW5GbG93ID0gKGRhdGE9bnVsbCkgPT4ge1xuXG4gIHdyaXRlTG9nKCdpbmZvJywgJ3N0YXJ0aW5nIGRhdGEgZGVsaXZlcnkgZmxvdycpXG5cbiAgaWYgKGNoZWNrUGFyYW0oJ3AnKSAmJiBjaGVja1BhcmFtKCdnJykpIHtcblxuICAgIGNvbnN0IGRhdGFPYmplY3RzID0gZ2V0RGF0YU9iamVjdExpc3QoKVxuICAgIGNvbnN0IGNzc09iamVjdHMgPSBnZXRDc3NPYmplY3RMaXN0KClcbiAgICBjb25zdCBjbGllbnREYXRhID0gZGF0YVxuXG4gICAgLy8gYWx3YXlzIGZpcmUgdGhlIHRhZyBhdCBsZWFzdCBvbmNlXG4gICAgYnVpbGRBbmRGaXJlKGRhdGFPYmplY3RzLCBjc3NPYmplY3RzLCBjbGllbnREYXRhKVxuXG4gICAgLy8gaWYgYW4gaW50ZXJ2YWwgd2FzIHNldCwgcmUtZmlyZSB0aGUgdGFnIG9uIHRoYXQgaW50ZXJ2YWxcbiAgICBpZiAoY2hlY2tQYXJhbSgnaW50ZXJ2YWwnKSkge1xuICAgICAgc2V0SW50ZXJ2YWwoXG4gICAgICAgICgpID0+IGJ1aWxkQW5kRmlyZShkYXRhT2JqZWN0cywgY3NzT2JqZWN0cywgY2xpZW50RGF0YSksXG4gICAgICAgIHdpbmRvdy54bDhfY29uZmlnWydpbnRlcnZhbCddXG4gICAgICApXG4gICAgfVxuICB9XG59XG5cbndpbmRvdy5zZW5kVG9OaWVsc2VuID0gKGRhdGE9bnVsbCkgPT4gcnVuTmllbHNlbkZsb3coZGF0YSlcblxuaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSAvLyBXM0Mgc3RhbmRhcmRcbntcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBydW5OaWVsc2VuRmxvdywgZmFsc2UpXG4gIHdyaXRlTG9nKCdpbmZvJywgJ2FkZGVkIG9ubG9hZCBsaXN0ZW5lcicpXG59XG5lbHNlIGlmICh3aW5kb3cuYXR0YWNoRXZlbnQpIC8vIE1pY3Jvc29mdFxue1xuICB3aW5kb3cuYXR0YWNoRXZlbnQoJ29ubG9hZCcsIHJ1bk5pZWxzZW5GbG93KVxuICB3cml0ZUxvZygnaW5mbycsICdhZGRlZCBvbmxvYWQgbGlzdGVuZXInKVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHRhZy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9")}]);